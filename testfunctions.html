<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>jQuery UI Menu</title>
  <link rel="stylesheet" href="jquery-ui.css">
  <script src="external/jquery/jquery.js"></script>
  <script src="jquery-ui.js"></script>
  <link rel="stylesheet" href="style.css">
  <script>

  $(function() {
   $("#Toggle_Menu").click(function()
      {
         $("#menu_div").toggle();
      });
   });

  $(function() {
     $(document).ready(function(){
        $("#menu").menu({
            select: function(event, ui) {
               // var li  = document.createElement('li'),
               // txt = document.createTextNode('This is the text in new element.');
                //var ul = document.createElement('ul');
 
                //li.appendChild(txt);

                var item = ui.item[0].id;
                //var firstChild = $(item).firstChild;
                //var nextChild = $(item).nextChild;
                //ul = document.getElementById(item);
                //ul.insertBefore(li, );
                //$("#menu ul").append('<li>' + $('#Sub_Item_Text').val() + '</li>');
               $("#menu").menu("refresh");

                $("#"+item).append("<li>"+$('#Sub_Item_Text').val()+"</li>");
                //$('ul#menu li:nth-child(1)').append('<li>I own shit</li>');
                $("#menu").menu("refresh");
            }
        });
    });
  });


  $(function() 
  {
    $("#menu").menu();

     $("#Add_Subject").click(function()
      {
         var htmlstuff = "<li>"+$('#Subject_Text').val()+"<ul><li>Sub-Items</li></ul></li>";
         $(htmlstuff).appendTo("#menu");
         $("#menu").menu("refresh");
       });
       
  }
  );

  $(function() 
   {
    $(document).bind('keydown', function(keyevent) 
      {
         if(event.keyCode == 13) 
            {
            var menuvalues = $("#menu").find('.ui-menu-item').text();
            console.log(menuvalues);
      }
    });
   });
  
  </script>
  <style>
  .ui-menu { width: 150px; }
  </style>
</head>
<body>
<div id="Toggle_Menu">Toggle Menu</div>
<div id="GO">Launch Pictures</div>
<div id="Add_Subject">Add Subject</div>
<input type="text" id="Subject_Text"></input>
<div id="Add_Sub">Add Sub Item</div>
<input type="text" id="Sub_Item_Text"></input>

<div id="menu_parent">

<ul id="menu">
  <li class="ui-state-disabled">Add to me!</li>
</ul>
 </div>
</body>
</html>