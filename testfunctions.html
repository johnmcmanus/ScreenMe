<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>jQuery UI Menu</title>
  <link rel="stylesheet" href="jquery-ui.css">
  <script src="external/jquery/jquery.js"></script>
  <script src="jquery-ui.js"></script>
  <link rel="stylesheet" href="style.css">
  <script>

  $(function() {
   $("#Toggle_Menu").click(function()
      {
         $("#menu_parent").toggle();
      });
   });

  $(function() {
     $(document).ready(function(){
        $("#menu").menu({
            select: function(event, ui) {
                var item = ui.item[0].id;
               $("#menu").menu("refresh");
                $("#"+item).append("<li>"+$('#Sub_Item_Text').val()+" </li>");
                $("#menu").menu("refresh");
            }
        });
    });
  });


  $(function() 
  {
    $("#menu").menu();

     $("#Add_Subject").click(function()
      {
         var htmlstuff = "<li>"+$('#Subject_Text').val()+"<ul><li> Sub-Items </li></ul></li>";
         $(htmlstuff).appendTo("#menu");
         $("#menu").menu("refresh");
       });
       
  }
  );

  

 $(function() {
   $("#GO").click(function(menuvalues_split)
      {
        var menuvalues = $("#menu").find('.ui-menu-item').text();
        var menuvalues_split = menuvalues.split(" ");
        console.log(menuvalues_split[0]);
        var currentval = menuvalues_split[0];
         $.getJSON("http://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=?",
        {
          tags: currentval,
          tagmode: "any",
          format: "json"
        },
        function(data) {
          $.each(data.items, function(i,item){
            $("<img/>").attr("src", item.media.m).prependTo("#results");
            if ( i == 10 ) return false;
          });
        });




      });
   });


  
  </script>
  <style>
  .ui-menu { width: 150px; }
  </style>
</head>
<body>
<div id="Toggle_Menu">Toggle Menu</div>
<div id="menu_parent">
<div id="GO">Launch Pictures</div>
<div id="Add_Subject">Add Subject</div>
<input type="text" id="Subject_Text"></input>
<div id="Add_Sub">Add Sub Item</div>
<input type="text" id="Sub_Item_Text"></input>
<ul id="menu">
  <li class="ui-state-disabled"></li>
</ul>
 </div>

<div id="results"></div>

</body>
</html>